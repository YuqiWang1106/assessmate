{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create Assessment</title>
    <script src="{% static 'js/create_assessment.js' %}"></script>
</head>
<body>

    <h1>Create Assessment</h1>
    <!-- Add Question Button -->
    <button onclick="openModal()">Add Question</button>

    <!-- Question List Area -->
    <form id="assessment-form" method="POST">

        {% csrf_token %}

    <!-- Assessment Title -->
    <label for="assessment-title">Assessment Title:</label>
    <input
    type="text"
    id="assessment-title"
    name="assessment_title"
    placeholder="Enter assessment title"
    style="width: 60%;"
    value="{{ assessment.title|default_if_none:'' }}"
    />
    <br><br>

        <div id="question-list">
        <!-- All questions will appear here -->
        </div>

        <!-- Control Buttons -->
        <br>
        <button type="button" onclick="saveAssessment(false)">Save & Quit</button>
        <button type="button" onclick="openPublishModal()">Publish</button>
    </form>

    <!-- Question Type Modal -->
    <div id="question-modal" style="display: none; position: fixed; top: 20%; left: 30%; background: white; border: 1px solid #ccc; padding: 20px;">
        <h3>Select Question Type</h3>
        <select id="question-type">
        <option value="likert">Likert Scale</option>
        <option value="open">Open-Ended</option>
        </select>
        <br><br>
        <button onclick="confirmAddQuestion()">Confirm</button>
        <button onclick="closeModal()">Cancel</button>
    </div>

    <!-- Publish Modal -->
    <div id="publish-modal" style="display: none; position: fixed; top: 25%; left: 30%; background: white; border: 1px solid #ccc; padding: 20px;">
        <h3>Select Due Date</h3>
        <input type="date" id="due-date" />
        <br><br>
        <button onclick="confirmPublish()">OK</button>
        <button onclick="closePublishModal()">Cancel</button>
    </div>

    <script id="preloaded-questions" type="application/json">
        {{ questions_json|safe }}
    </script>

</body>
</html>
